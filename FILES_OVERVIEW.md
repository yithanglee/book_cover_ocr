# ğŸ“ Project Files Overview

Complete guide to all files in the Book Cover OCR project.

---

## ğŸ¯ Quick Start Files

### `setup.sh` âš¡
**Automated setup script**
- Installs dependencies
- Creates virtual environment
- Verifies required files
- Shows network information

**Usage:**
```bash
chmod +x setup.sh
./setup.sh
```

### `QUICK_START.md` ğŸ“‹
**5-minute quick start guide**
- Super quick setup instructions
- All 4 image feeding methods
- Common use cases
- One-liner commands

**Best for:** Getting started quickly

---

## ğŸ“š Documentation Files

### `README.md` ğŸ“–
**Complete user manual**
- System requirements
- Installation guide
- All feeding methods detailed
- Configuration tips
- Troubleshooting
- Performance guidelines

**Best for:** Full understanding of the system

### `DEPLOYMENT.md` ğŸš€
**Detailed deployment guide for GMKtec M3**
- Step-by-step installation
- Network configuration
- Security setup
- Monitoring
- Production checklist
- Performance benchmarks

**Best for:** Production deployment

### `IMAGE_FEEDING_OPTIONS.md` ğŸ“¸
**Visual guide to all image input methods**
- Architecture diagrams
- Detailed comparison of all methods
- Real-world use cases
- Network topology examples
- Performance guidelines

**Best for:** Understanding how to feed images

### `FILES_OVERVIEW.md` ğŸ“
**This file - complete file listing**

---

## ğŸ”§ Core Application Files

### `app.py` ğŸ¯
**Main FastAPI application**

**Features:**
- Web interface endpoint
- Image recognition API
- Base64 recognition endpoint
- Health check
- Books listing
- Static file serving

**Endpoints:**
- `GET /` - Web interface
- `GET /health` - Health check
- `POST /recognize` - Recognize from uploaded file
- `POST /recognize_base64` - Recognize from base64
- `GET /books` - List all books

### `utils/embedding.py` ğŸ§ 
**Image embedding utilities**
- MobileNet ONNX inference
- Image preprocessing
- Embedding normalization

### `generate_embeddings.py` ğŸ”„
**Pre-compute book cover embeddings**
- Generates embeddings from book cover images
- Creates embeddings.npy file

---

## ğŸ› ï¸ Utility Scripts

### `batch_process.py` ğŸ“¦
**Batch image processing script**

**Features:**
- Process multiple images from directory
- Parallel processing (configurable workers)
- Progress tracking
- JSON output
- Error handling

**Usage:**
```bash
python batch_process.py /path/to/images/ results.json
```

**Configuration:**
```python
MAX_WORKERS = 4  # Adjust for your system
```

### `watch_folder.py` ğŸ‘ï¸
**Automatic folder monitoring**

**Features:**
- Real-time folder monitoring
- Automatic image processing
- Result saving to JSON
- Timestamp tracking
- Error logging

**Usage:**
```bash
python watch_folder.py /watch/folder/ /results/folder/
```

**Best for:** Scanner integration, automated workflows

### `client_example.py` ğŸ”Œ
**Example API client**

**Demonstrates:**
- Health checking
- File upload recognition
- Base64 recognition
- Listing books

**Usage:**
```bash
python client_example.py
```

### `test_service.py` ğŸ§ª
**Service testing script**

**Tests:**
- Required files present
- Service running
- Health endpoint
- Books listing
- Web interface
- Image recognition

**Usage:**
```bash
python test_service.py
```

**Output:** Colored test results with pass/fail status

---

## ğŸŒ Web Interface

### `static/index.html` ğŸ¨
**Beautiful web interface**

**Features:**
- Drag & drop upload
- Click to upload
- Image preview
- Real-time results
- Responsive design
- Mobile-friendly

**Access:** `http://localhost:8000`

**Technologies:**
- Pure HTML/CSS/JavaScript
- No build process needed
- Works on all modern browsers

---

## ğŸ“Š Data Files

### `embeddings.npy` ğŸ”¢
**Pre-computed image embeddings**
- NumPy array of book cover embeddings
- Used for FAISS similarity search
- Generated by `generate_embeddings.py`

**Format:** Float32 NumPy array

### `meta.json` ğŸ“‹
**Book metadata**

**Structure:**
```json
{
  "B001": {
    "title": "Book Title",
    "author": "Author Name",
    "image": "path/to/cover.jpg"
  }
}
```

**Used for:** Displaying book information with results

### `models/mobilenet.onnx` ğŸ§ 
**MobileNet model for embeddings**
- Pre-trained ONNX model
- Efficient inference
- Optimized for CPU

---

## âš™ï¸ Configuration Files

### `requirements.txt` ğŸ“¦
**Python dependencies**

**Key packages:**
- `fastapi` - Web framework
- `uvicorn` - ASGI server
- `opencv-python-headless` - Image processing
- `onnxruntime` - Model inference
- `faiss-cpu` - Similarity search
- `watchdog` - Folder monitoring

**Installation:**
```bash
pip install -r requirements.txt
```

### `book-ocr.service` ğŸ”§
**Systemd service file**

**Purpose:** Run as system service on Linux
- Auto-start on boot
- Automatic restart on failure
- Logging to systemd journal

**Installation:**
```bash
sudo cp book-ocr.service /etc/systemd/system/
sudo systemctl enable book-ocr
sudo systemctl start book-ocr
```

---

## ğŸ“‚ Directory Structure

```
book_cover_ocr/
â”‚
â”œâ”€â”€ ğŸ“– Documentation
â”‚   â”œâ”€â”€ README.md                    # Main documentation
â”‚   â”œâ”€â”€ QUICK_START.md               # Quick start guide
â”‚   â”œâ”€â”€ DEPLOYMENT.md                # Deployment guide
â”‚   â”œâ”€â”€ IMAGE_FEEDING_OPTIONS.md     # Image input methods
â”‚   â””â”€â”€ FILES_OVERVIEW.md            # This file
â”‚
â”œâ”€â”€ ğŸ”§ Core Application
â”‚   â”œâ”€â”€ app.py                       # Main FastAPI app
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ embedding.py             # Embedding utilities
â”‚
â”œâ”€â”€ ğŸ› ï¸ Utility Scripts
â”‚   â”œâ”€â”€ setup.sh                     # Setup script
â”‚   â”œâ”€â”€ batch_process.py             # Batch processing
â”‚   â”œâ”€â”€ watch_folder.py              # Folder watcher
â”‚   â”œâ”€â”€ client_example.py            # API client example
â”‚   â”œâ”€â”€ test_service.py              # Testing script
â”‚   â””â”€â”€ generate_embeddings.py       # Generate embeddings
â”‚
â”œâ”€â”€ ğŸŒ Web Interface
â”‚   â””â”€â”€ static/
â”‚       â””â”€â”€ index.html               # Web UI
â”‚
â”œâ”€â”€ ğŸ“Š Data Files
â”‚   â”œâ”€â”€ embeddings.npy               # Embeddings database
â”‚   â”œâ”€â”€ meta.json                    # Book metadata
â”‚   â””â”€â”€ models/
â”‚       â””â”€â”€ mobilenet.onnx           # ML model
â”‚
â””â”€â”€ âš™ï¸ Configuration
    â”œâ”€â”€ requirements.txt             # Python dependencies
    â””â”€â”€ book-ocr.service             # Systemd service
```

---

## ğŸ¯ File Usage by Scenario

### Scenario 1: First Time Setup
1. Read `QUICK_START.md`
2. Run `setup.sh`
3. Run `test_service.py`
4. Start using!

### Scenario 2: Production Deployment
1. Read `DEPLOYMENT.md`
2. Copy all files to GMKtec M3
3. Run `setup.sh`
4. Configure `book-ocr.service`
5. Run `test_service.py`

### Scenario 3: Integration Development
1. Read `README.md`
2. Read `IMAGE_FEEDING_OPTIONS.md`
3. Study `client_example.py`
4. Use `test_service.py` for verification

### Scenario 4: Batch Processing
1. Start service with `app.py`
2. Use `batch_process.py` for images
3. Check results JSON

### Scenario 5: Automated Workflow
1. Start service with `app.py`
2. Use `watch_folder.py` for monitoring
3. Drop images into watched folder

---

## ğŸ” File Dependencies

### Application Dependencies
```
app.py
â”œâ”€â”€ utils/embedding.py
â”œâ”€â”€ embeddings.npy
â”œâ”€â”€ meta.json
â”œâ”€â”€ models/mobilenet.onnx
â””â”€â”€ static/index.html
```

### Batch Processing Dependencies
```
batch_process.py
â””â”€â”€ app.py (running service)
```

### Folder Watcher Dependencies
```
watch_folder.py
â””â”€â”€ app.py (running service)
```

---

## ğŸ“ Modifying Files

### To Change Port
**Edit:** `app.py`, `book-ocr.service`
**Change:** Port 8000 to desired port

### To Adjust Workers
**Edit:** `book-ocr.service` or command line
**Change:** `--workers 2` to desired number

### To Add Books
**Edit:** `meta.json`
**Regenerate:** `embeddings.npy` using `generate_embeddings.py`

### To Customize Web UI
**Edit:** `static/index.html`
**No rebuild needed:** Pure HTML/CSS/JS

### To Adjust Batch Processing Speed
**Edit:** `batch_process.py`
**Change:** `MAX_WORKERS = 4` to desired number

---

## ğŸ—‘ï¸ Optional Files

These files can be deleted if not needed:

- `client_example.py` - Only for reference
- `test_service.py` - Only for testing
- `DEPLOYMENT.md` - After deployment complete
- `FILES_OVERVIEW.md` - This file
- `.git/` - If not tracking changes

**Keep these files:**
- `app.py` - Core application
- `utils/` - Required utilities
- `embeddings.npy` - Essential data
- `meta.json` - Essential data
- `models/` - Required model
- `static/` - Web interface
- `requirements.txt` - For updates

---

## ğŸ“¦ Backup Checklist

**Essential files to backup:**
- âœ… `embeddings.npy` - Your embeddings database
- âœ… `meta.json` - Book metadata
- âœ… `models/mobilenet.onnx` - ML model
- âœ… Custom modifications to `app.py`
- âœ… Custom modifications to `static/index.html`

**Backup command:**
```bash
tar -czf backup-$(date +%Y%m%d).tar.gz \
    embeddings.npy meta.json models/ \
    app.py static/
```

---

## ğŸ”„ Update Procedure

### To update the application:

1. **Backup current version:**
   ```bash
   tar -czf backup-$(date +%Y%m%d).tar.gz \
       embeddings.npy meta.json models/
   ```

2. **Update code:**
   ```bash
   git pull  # or copy new files
   ```

3. **Update dependencies:**
   ```bash
   pip install -r requirements.txt --upgrade
   ```

4. **Test:**
   ```bash
   python test_service.py
   ```

5. **Restart service:**
   ```bash
   sudo systemctl restart book-ocr
   ```

---

## ğŸ“Š File Size Reference

Approximate sizes (will vary based on data):

| File | Approximate Size | Purpose |
|------|-----------------|---------|
| `app.py` | ~3 KB | Code |
| `requirements.txt` | <1 KB | Config |
| `embeddings.npy` | Varies* | Data |
| `meta.json` | Varies* | Data |
| `models/mobilenet.onnx` | ~15 MB | Model |
| `static/index.html` | ~10 KB | UI |

*Depends on number of books indexed

**Total project size:** ~20-50 MB + data files

---

## ğŸ“ Learning Path

### Beginner (Just use it):
1. `QUICK_START.md`
2. `setup.sh`
3. Web interface at `http://localhost:8000`

### Intermediate (Understand it):
1. `README.md`
2. `IMAGE_FEEDING_OPTIONS.md`
3. `client_example.py`
4. `app.py`

### Advanced (Customize it):
1. `DEPLOYMENT.md`
2. All source files
3. Modify and extend as needed

---

## â“ FAQ

**Q: Which files do I need to copy to GMKtec M3?**
A: All of them! The entire directory.

**Q: Can I delete the .md files after reading?**
A: Yes, but keep at least README.md for reference.

**Q: Which file do I run to start the service?**
A: `app.py` via: `uvicorn app:app --host 0.0.0.0 --port 8000`

**Q: Where are the results stored?**
A: Results are returned via API. Use `batch_process.py` or `watch_folder.py` to save to JSON.

**Q: How do I add more books?**
A: Add to `meta.json` and regenerate `embeddings.npy` using `generate_embeddings.py`

---

## ğŸ†˜ Quick Help

**Service won't start:**
â†’ Check `requirements.txt` installed
â†’ Run `test_service.py`

**Can't access from network:**
â†’ Check firewall: `sudo ufw allow 8000/tcp`
â†’ Verify IP: `hostname -I`

**Out of memory:**
â†’ Reduce workers in `book-ocr.service`
â†’ Use 1 worker for 8GB RAM

**Need more help:**
â†’ Read `DEPLOYMENT.md` troubleshooting section
â†’ Check system logs: `journalctl -u book-ocr -f`

---

**Now you know what every file does! ğŸ‰**

Pick your scenario above and get started!

